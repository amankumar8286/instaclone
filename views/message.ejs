<div class="flex flex-col h-screen bg-gray-100">

  <!-- Header -->
  <div class="flex items-center p-4 bg-white shadow-sm">
    <button class="mr-4">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>

    <div class="flex items-center gap-2">
      <img src="<%= user.profilePic %>" class="w-9 h-9 rounded-full">
      <h2 class="font-semibold text-lg"><%= user.username %></h2>
    </div>
  </div>

  <!-- Messages area -->
  <div id="messages" class="flex-1 overflow-y-auto px-4 py-3 space-y-3">

    <% messages.forEach(msg => { %>

      <% if (msg.senderId === currentUser.id) { %>
        <!-- Sender message (Right) -->
        <div class="flex justify-end">
          <div class="max-w-xs bg-blue-500 text-white px-4 py-2 rounded-2xl rounded-br-none text-sm">
            <%= msg.text %>
          </div>
        </div>

      <% } else { %>
        <!-- Receiver message (Left) -->
        <div class="flex items-start gap-2">
          <img src="<%= otherUser.profilePic %>" class="w-8 h-8 rounded-full">
          <div class="max-w-xs bg-white px-4 py-2 rounded-2xl rounded-bl-none shadow text-sm">
            <%= msg.text %>
          </div>
        </div>
      <% } %>

    <% }) %>

  </div>

  <!-- Input box -->
  <form action="/sendMessage" method="POST" class="p-4 bg-white flex items-center gap-3">
    
    <input type="hidden" name="receiverId" value="<%= otherUser.id %>">

    <input 
      name="text"
      placeholder="Message..."
      class="flex-1 border rounded-full px-4 py-2 text-sm focus:ring-1 focus:ring-gray-300 outline-none"
    >

    <button class="p-2 rounded-full bg-blue-500 text-white">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10l11 2-11 2 3 7 14-9L6 3l-3 7z" />
      </svg>
    </button>

  </form>

</div>
